# Phase 2 Pre-Reboot to CRT Mode — 2026-02-22 00:20 UTC

**Purpose:** State snapshot after Phase 2 (CRT script) completed, before reboot into CRT mode.

## System State

| Item | Value |
|------|-------|
| Uptime | 2 minutes (rebooted after Phase 2) |
| Kernel | 6.18.9 (X11 CRT boot) |
| Boot image | `BOOT_IMAGE=/crt/linux` |
| Dual-boot | YES |
| Current mode | `800x1280.60.00` (Steam Deck native — CRT modelines not active yet, need reboot) |

## batocera.conf Video Entries

```
es.resolution=769x576.50.00000
global.videooutput2=none
```

Key observations:
- `es.resolution` is `769x576.50.00000` (5 trailing zeros) — yet another precision variant
- **`global.videomode` is NOT set** — emulatorlauncher will get `default` as fallback, which means no `changeMode()` call on first CRT boot
- `global.videomode` will be set by `restore_video_settings()` after a roundtrip — that's when the mismatch could occur

## File State

| File | Status |
|------|--------|
| `crt-launcher.sh` | **Executable** (`-rwxr-xr-x`) — Phase 2 ran `chmod 755` |
| `es_systems_crt.cfg` (installed) | Present, command points to `crt-launcher.sh` |
| `15-crt-monitor.conf` | NOT FOUND (will be in overlay or generated by boot-custom.sh) |
| `boot-custom.sh` | NOT FOUND |
| CRT overlay | Exists (100 MB at `/boot/crt/overlay`) |
| Wayland overlay | Does not exist |

## es_systems_crt.cfg Command

```xml
<command>/userdata/system/Batocera-CRT-Script/Geometry_modeline/crt-launcher.sh %CONTROLLERSCONFIG% ...</command>
```

Correct — wrapper is wired up.

## Assessment

Phase 2 completed. CRT overlay saved. `crt-launcher.sh` is now executable. `es_systems_crt.cfg` correctly references the wrapper. `global.videomode` is NOT set yet — this means on the first CRT boot, emulatorlauncher will use `default` mode (no mismatch). The mismatch bug is expected to surface only after a CRT->HD->CRT roundtrip when `restore_video_settings()` sets `global.videomode`.
